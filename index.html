<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>EmbeddedMail by jmarnold</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/jmarnold/EmbeddedMail">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/jmarnold/EmbeddedMail/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/jmarnold/EmbeddedMail/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>EmbeddedMail</h1>
          <p>Integration testing against e-mail almost always sucks. EmbeddedMail doesn't remove all of that pain, but it certainly helps it suck less by providing an in-memory SMTP server that you can assert on.</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/jmarnold">jmarnold</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="http://twitter.com/#!/michigangraham">mattgraham</a></span>
        </div>

        <h1>EmbeddedMail</h1>

<h2>Overview</h2>

<p>Integration testing against e-mail almost always sucks. EmbeddedMail doesn't remove all of that pain, but it certainly helps it suck less. It's just a simple class library with <strong>0 dependencies</strong>.</p>

<h3>Show me the code</h3>

<p>Here's some simple example code:</p>

<pre><code>var server = new EmeddedSmtpServer(8181);
server.Start();

var message = new MailMessage("x@domain.com", "y@domain.com", "Hello there", "O hai");
using(var client = new SmtpClient("localhost", 8181))
{
    client.Send(message);
}

server.Stop();

var received = server.ReceivedMessages().First();

received.Body.ShouldEqual(message.Body);
received.Subject.ShouldEqual(message.Subject);
</code></pre>

<h3>How it works</h3>

<p>The idea is that you collapse your app-domain for integration-testing purposes by embedding an SMTP server inside of your tests. You then run some code that would shoot out emails, stop the smtp server, and make assertions on the messages that were received (e.g., "The body should be...")</p>

<h3>NuGet</h3>

<blockquote>
<p>Install-Package EmbeddedMail</p>
</blockquote>

<h3>Shout outs</h3>

<p>I took a look at some of the existing solutions out there and found two:</p>

<ul>
<li>netDumpster</li>
<li>nDumpster</li>
</ul><p>Some of the message parsing "borrows" some code found in netDumpster (thanks Carlos and Eric for your contributions -- your work is cited). </p>

<p>Also, I borrowed some socket/logging code from Jason Staten and his excellent Fleck library.</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><!--<![endif]-->
    
  </body>
</html>